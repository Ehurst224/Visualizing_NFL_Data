(this.webpackJsonp=this.webpackJsonp||[]).push([[420],{"3lQS":function(e,t,r){"use strict";var n={components:{GlAvatar:r("tbP8").a},props:{projectName:{type:String,required:!0},projectAvatarUrl:{type:String,required:!1,default:""},size:{type:Number,default:32,required:!1},alt:{type:String,required:!1,default:void 0}},computed:{avatarAlt(){var e;return null!==(e=this.alt)&&void 0!==e?e:this.projectName}}},s=r("tBpV"),a=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("gl-avatar",{attrs:{shape:"rect","entity-name":this.projectName,src:this.projectAvatarUrl,alt:this.avatarAlt,size:this.size}})}),[],!1,null,null,null);t.a=a.exports},orNV:function(e,t,r){"use strict";r.r(t),r.d(t,"mountTopNav",(function(){return it})),r.d(t,"mountTopNavResponsive",(function(){return ot}));var n={};r.r(n),r.d(n,"setNamespace",(function(){return Pe})),r.d(n,"setStorageKey",(function(){return Ve})),r.d(n,"requestFrequentItems",(function(){return He})),r.d(n,"receiveFrequentItemsSuccess",(function(){return Be})),r.d(n,"receiveFrequentItemsError",(function(){return Je})),r.d(n,"fetchFrequentItems",(function(){return ze})),r.d(n,"requestSearchedItems",(function(){return Ke})),r.d(n,"receiveSearchedItemsSuccess",(function(){return Ye})),r.d(n,"receiveSearchedItemsError",(function(){return We})),r.d(n,"fetchSearchedItems",(function(){return Ze})),r.d(n,"setSearchQuery",(function(){return Xe}));var s={};r.r(s),r.d(s,"hasSearchQuery",(function(){return et}));var a=r("ewH8"),i=r("yi8e"),o=r("/lV4");const c=20,l=5,u=3,d=3,m={projects:"frequent-projects",groups:"frequent-groups"},p={projects:{loadingMessage:Object(o.f)("ProjectsDropdown|Loading projects"),header:Object(o.f)("ProjectsDropdown|Frequently visited"),itemListErrorMessage:Object(o.f)("ProjectsDropdown|This feature requires browser localStorage support"),itemListEmptyMessage:Object(o.f)("ProjectsDropdown|Projects you visit often will appear here"),searchListErrorMessage:Object(o.f)("ProjectsDropdown|Something went wrong on our end."),searchListEmptyMessage:Object(o.f)("ProjectsDropdown|Sorry, no projects matched your search"),searchInputPlaceholder:Object(o.f)("ProjectsDropdown|Search your projects")},groups:{loadingMessage:Object(o.f)("GroupsDropdown|Loading groups"),header:Object(o.f)("GroupsDropdown|Frequently visited"),itemListErrorMessage:Object(o.f)("GroupsDropdown|This feature requires browser localStorage support"),itemListEmptyMessage:Object(o.f)("GroupsDropdown|Groups you visit often will appear here"),searchListErrorMessage:Object(o.f)("GroupsDropdown|Something went wrong on our end."),searchListEmptyMessage:Object(o.f)("GroupsDropdown|Sorry, no groups matched your search"),searchInputPlaceholder:Object(o.f)("GroupsDropdown|Search your groups")}},h={namespace:"projects",key:"project",vuexModule:"frequentProjects"},v={namespace:"groups",key:"group",vuexModule:"frequentGroups"},f=[h,v];var g=r("GuZl"),y={props:{slotKey:{type:String,required:!1,default:""}},data:()=>({aliveSlotsLookup:{}}),computed:{aliveSlots(){return Object.keys(this.aliveSlotsLookup)}},watch:{slotKey:{handler(e){e&&this.$set(this.aliveSlotsLookup,e,!0)},immediate:!0}},methods:{isCurrentSlot(e){return e===this.slotKey}}},_=r("tBpV"),E=Object(_.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.aliveSlots,(function(t){return r("div",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentSlot(t),expression:"isCurrentSlot(slot)"}],key:t,staticClass:"gl-h-full gl-w-full"},[e._t(t)],2)})),0)}),[],!1,null,null,null).exports;const S=function(e){return null==e?void 0:e.map((function(e){return{...e,active:!1}}))};var w=r("LLbv"),I=r("R4kS"),b=r.n(I),M=r("wCL9"),q=r.n(M),O=r("4lAS"),T=r("s1D3");var C={components:{GlButton:O.a,GlIcon:T.a},props:{menuItem:{type:Object,required:!0},iconOnly:{type:Boolean,required:!1,default:!1}},computed:{dataAttrs(){return b()(this.menuItem.data||{},(function(e,t){return function(e){return`data-${q()(e)}`}(t)}))}},ACTIVE_CLASS:"gl-shadow-none! gl-font-weight-bold! active"},x=Object(_.a)(C,(function(){var e,t=this,r=t.$createElement,n=t._self._c||r;return n("gl-button",t._g(t._b({staticClass:"top-nav-menu-item gl-display-block",class:[t.menuItem.css_class,(e={},e[t.$options.ACTIVE_CLASS]=t.menuItem.active,e)],attrs:{category:"tertiary",href:t.menuItem.href,"aria-label":t.menuItem.title}},"gl-button",t.dataAttrs,!1),t.$listeners),[n("span",{staticClass:"gl-display-flex"},[t.menuItem.icon?n("gl-icon",{class:{"gl-mr-3!":!t.iconOnly},attrs:{name:t.menuItem.icon}}):t._e(),t._v(" "),t.iconOnly?t._e():[t._v("\n      "+t._s(t.menuItem.title)+"\n      "),t.menuItem.view?n("gl-icon",{staticClass:"gl-ml-auto",attrs:{name:"chevron-right"}}):t._e()]],2)])}),[],!1,null,null,null).exports,j={components:{TopNavMenuItem:x},directives:{GlTooltip:w.a},computed:{menuItem:()=>({id:"home",view:"home",icon:"angle-left"})}},R=Object(_.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"gl-py-4 gl-display-flex gl-align-items-center"},[r("top-nav-menu-item",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{title:e.s__("TopNav|Go back")},expression:"{ title: s__('TopNav|Go back') }"}],staticClass:"gl-p-3!",attrs:{"menu-item":e.menuItem,"icon-only":""},on:{click:function(t){return e.$emit("menu-item-click",e.menuItem)}}}),e._v(" "),r("span",{staticClass:"gl-font-size-h2 gl-font-weight-bold gl-ml-2"},[e._t("default")],2)],1)}),[],!1,null,null,null).exports;const N="gl-pt-3 gl-border-1 gl-border-t-solid gl-border-gray-50";var k={components:{TopNavMenuItem:x},props:{sections:{type:Array,required:!0},withTopBorder:{type:Boolean,required:!1,default:!1}},methods:{onClick(e){e.href||this.$emit("menu-item-click",e)},getMenuSectionClasses(e){return{[N]:this.withTopBorder||e>0,"gl-mt-3":e>0}}},BORDER_CLASSES:N},D=Object(_.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gl-display-flex gl-align-items-stretch gl-flex-direction-column"},e._l(e.sections,(function(t,n){var s=t.id,a=t.menuItems;return r("div",{key:s,class:e.getMenuSectionClasses(n),attrs:{"data-testid":"menu-section"}},e._l(a,(function(t,n){return r("top-nav-menu-item",{key:t.id,staticClass:"gl-w-full",class:{"gl-mt-1":n>0},attrs:{"menu-item":t,"data-testid":"menu-item"},on:{click:function(r){return e.onClick(t)}}})})),1)})),0)}),[],!1,null,null,null).exports,F=r("Yyc1"),$=r("koWC"),A=r("wP8z"),Q=r("arQV"),L={components:{GlDropdown:F.a,GlDropdownDivider:$.a,GlDropdownItem:A.a,GlDropdownSectionHeader:Q.a},props:{viewModel:{type:Object,required:!0}},computed:{sections(){return this.viewModel.menu_sections||[]},showHeaders(){return this.sections.length>1}}},U=Object(_.a)(L,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("gl-dropdown",{attrs:{"toggle-class":"top-nav-menu-item",icon:"plus",text:e.viewModel.title,category:"tertiary","text-sr-only":"","no-caret":"",right:""}},[e._l(e.sections,(function(t,n){var s=t.title,a=t.menu_items;return[n>0?r("gl-dropdown-divider",{key:n+"_divider",attrs:{"data-testid":"divider"}}):e._e(),e._v(" "),e.showHeaders?r("gl-dropdown-section-header",{key:n+"_header",attrs:{"data-testid":"header"}},[e._v("\n      "+e._s(s)+"\n    ")]):e._e(),e._v(" "),e._l(a,(function(t){return[r("gl-dropdown-item",{key:n+"_item_"+t.id,attrs:{"link-class":"top-nav-menu-item",href:t.href,"data-testid":"item","data-qa-selector":t.title.toLowerCase().replace(" ","_")+"_mobile_button"}},[e._v("\n        "+e._s(t.title)+"\n      ")])]}))]}))],2)}),[],!1,null,null,null).exports;var G={components:{TopNavMenuItem:x,TopNavMenuSections:D,TopNavNewDropdown:U},directives:{GlTooltip:w.a},props:{navData:{type:Object,required:!0}},computed:{menuSections(){return[{id:"primary",menuItems:this.navData.primary},{id:"secondary",menuItems:this.navData.secondary}].filter((function(e){var t;return null===(t=e.menuItems)||void 0===t?void 0:t.length}))},newDropdownViewModel(){return this.navData.views.new},searchMenuItem(){return this.navData.views.search}}},P=Object(_.a)(G,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("header",{staticClass:"gl-display-flex gl-align-items-center gl-py-4 gl-pl-4"},[r("h1",{staticClass:"gl-m-0 gl-font-size-h2 gl-reset-color gl-mr-auto"},[e._v(e._s(e.__("Menu")))]),e._v(" "),e.searchMenuItem?r("top-nav-menu-item",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{title:e.searchMenuItem.title},expression:"{ title: searchMenuItem.title }"}],staticClass:"gl-ml-3",attrs:{"menu-item":e.searchMenuItem,"icon-only":""}}):e._e(),e._v(" "),e.newDropdownViewModel?r("top-nav-new-dropdown",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{title:e.newDropdownViewModel.title},expression:"{ title: newDropdownViewModel.title }"}],staticClass:"gl-ml-3",attrs:{"view-model":e.newDropdownViewModel,"data-qa-selector":"mobile_new_dropdown"}}):e._e()],1),e._v(" "),r("top-nav-menu-sections",e._g({staticClass:"gl-h-full",attrs:{sections:e.menuSections}},e.$listeners))],1)}),[],!1,null,null,null).exports,V=r("FkSe"),H=r("n7CP"),B=r("lx39"),J=r.n(B),z=r("yMGJ"),K=r.n(z);const Y=function({namespaceSelector:e,fields:t,vuexHelper:r,selector:n}={}){return r(K()(function(e){return Array.isArray(e)?e.reduce((function(e,t){return Object.assign(e,{[t]:t})}),{}):e}(t),(function(t){if(!J()(t))throw new Error("`vuex_module_mappers` can only be used with an array of strings, or an object with string values. Consider using the regular `vuex` map helpers instead.");return function(...r){const s=e(this);return n(s,t,...r)}})))},W=function(e,t){return Y({namespaceSelector:e,fields:t,vuexHelper:i.f,selector:function(e,t,r){return r[e][t]}})},Z=function(e,t){return Y({namespaceSelector:e,fields:t,vuexHelper:i.c,selector:function(e,t,r,...n){return r(`${e}/${t}`,...n)}})};var X=r("7xOh"),ee=Object(X.a)(),te=r("mA6J"),re=r.n(te),ne=r("eVUo"),se=r("D+x4");const ae=function(){return["md","sm","xs"].includes(ne.b.getBreakpointSize())},ie=function(e){const t=function(t){return Object.prototype.hasOwnProperty.call(e,t)?{[t]:Object(se.a)(e[t].toString(),{ALLOWED_TAGS:[]})}:{}};return{...e,...t("name"),...t("namespace")}};var oe=r("R0j4"),ce=r("Htnb"),le=r("0AwG"),ue=r("ygVz"),de=r("3lQS");const me=ue.a.mixin();var pe={components:{GlButton:O.a,ProjectAvatar:de.a},directives:{SafeHtml:oe.a},mixins:[me],inject:["vuexModule"],props:{matcher:{type:String,required:!1,default:""},itemId:{type:Number,required:!0},itemName:{type:String,required:!0},namespace:{type:String,required:!1,default:""},webUrl:{type:String,required:!0},avatarUrl:{required:!0,validator:e=>null===e||"string"==typeof e}},computed:{...W((function(e){return e.vuexModule}),["dropdownType"]),truncatedNamespace(){return Object(le.u)(this.namespace)},highlightedItemName(){return Object(ce.a)(this.itemName,this.matcher)}}},he=Object(_.a)(pe,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"frequent-items-list-item-container"},[r("gl-button",{staticClass:"gl-text-left gl-justify-content-start!",attrs:{category:"tertiary",href:e.webUrl},on:{click:function(t){return e.track("click_link",{label:e.dropdownType+"_dropdown_frequent_items_list_item"})}}},[r("project-avatar",{staticClass:"gl-float-left gl-mr-3",attrs:{"project-avatar-url":e.avatarUrl,"project-name":e.itemName,"aria-hidden":"true"}}),e._v(" "),r("div",{ref:"frequentItemsItemMetadataContainer",staticClass:"frequent-items-item-metadata-container"},[r("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.highlightedItemName,expression:"highlightedItemName"}],ref:"frequentItemsItemTitle",staticClass:"frequent-items-item-title",attrs:{title:e.itemName}}),e._v(" "),e.namespace?r("div",{ref:"frequentItemsItemNamespace",staticClass:"frequent-items-item-namespace",attrs:{title:e.namespace}},[e._v("\n        "+e._s(e.truncatedNamespace)+"\n      ")]):e._e()])],1)],1)}),[],!1,null,null,null).exports,ve={props:{namespace:{type:String,required:!0}},methods:{getTranslations(e){var t=this;return e.reduce((function(e,r){return{...e,[r]:p[t.namespace][r]}}),{})}}},fe={components:{FrequentItemsListItem:he},mixins:[ve],props:{items:{type:Array,required:!0},hasSearchQuery:{type:Boolean,required:!0},isFetchFailed:{type:Boolean,required:!0},matcher:{type:String,required:!0}},computed:{translations(){return this.getTranslations(["itemListEmptyMessage","itemListErrorMessage","searchListEmptyMessage","searchListErrorMessage"])},isListEmpty(){return 0===this.items.length},listEmptyMessage(){return this.hasSearchQuery?this.isFetchFailed?this.translations.searchListErrorMessage:this.translations.searchListEmptyMessage:this.isFetchFailed?this.translations.itemListErrorMessage:this.translations.itemListEmptyMessage},sanitizedItems(){return this.items.map(ie)}}},ge=Object(_.a)(fe,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"frequent-items-list-container"},[r("ul",{ref:"frequentItemsList",staticClass:"list-unstyled"},[e.isListEmpty?r("li",{staticClass:"section-empty gl-mb-3",class:{"section-failure":e.isFetchFailed}},[e._v("\n      "+e._s(e.listEmptyMessage)+"\n    ")]):e._l(e.sanitizedItems,(function(t){return r("frequent-items-list-item",{key:t.id,attrs:{"item-id":t.id,"item-name":t.name,namespace:t.namespace,"web-url":t.webUrl,"avatar-url":t.avatarUrl,matcher:e.matcher}})}))],2)])}),[],!1,null,null,null).exports,ye=r("Tmea"),_e=r.n(ye),Ee=r("iN9h");const Se=ue.a.mixin();var we,Ie,be={components:{GlSearchBoxByType:Ee.a},mixins:[ve,Se],inject:["vuexModule"],data:()=>({searchQuery:""}),computed:{...W((function(e){return e.vuexModule}),["dropdownType"]),translations(){return this.getTranslations(["searchInputPlaceholder"])}},watch:{searchQuery:_e()((function(){this.track("type_search_query",{label:`${this.dropdownType}_dropdown_frequent_items_search_input`}),this.setSearchQuery(this.searchQuery)}),500)},methods:{...Z((function(e){return e.vuexModule}),["setSearchQuery"])}},Me={components:{FrequentItemsSearchInput:Object(_.a)(be,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-input-container"},[r("gl-search-box-by-type",{attrs:{placeholder:e.translations.searchInputPlaceholder},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)}),[],!1,null,null,null).exports,FrequentItemsList:ge,GlLoadingIcon:V.a},mixins:[ve],inject:["vuexModule"],props:{currentUserName:{type:String,required:!0},currentItem:{type:Object,required:!0},searchClass:{type:String,required:!1,default:""}},computed:{...W((function(e){return e.vuexModule}),["searchQuery","isLoadingItems","isFetchFailed","items"]),...(we=function(e){return e.vuexModule},Ie=["hasSearchQuery"],Y({namespaceSelector:we,fields:Ie,vuexHelper:i.f,selector:function(e,t,r,n){return n[`${e}/${t}`]}})),translations(){return this.getTranslations(["loadingMessage","header"])}},created(){const{namespace:e,currentUserName:t,currentItem:r}=this,n=`${t}/${m[e]}`;this.setNamespace(e),this.setStorageKey(n),r.id&&this.logItemAccess(n,r),ee.$on(`${this.namespace}-dropdownOpen`,this.dropdownOpenHandler);const s=document.getElementById(`nav-${this.namespace}-dropdown`);s&&s.classList.contains("show")&&this.dropdownOpenHandler()},beforeDestroy(){ee.$off(`${this.namespace}-dropdownOpen`,this.dropdownOpenHandler)},methods:{...Z((function(e){return e.vuexModule}),["setNamespace","setStorageKey","fetchFrequentItems"]),dropdownOpenHandler(){(""===this.searchQuery||ae())&&this.fetchFrequentItems()},logItemAccess(e,t){const r=ie(t);if(!H.a.canUseLocalStorage())return!1;const n=localStorage.getItem(e),s=n?JSON.parse(n):[{...r,frequency:1}],a=s.findIndex((function(e){return e.id===r.id}));return a>-1?s[a]=function(e,t){const r=!e.lastAccessedOn||Math.abs(t.lastAccessedOn-e.lastAccessedOn)/36e5>1;return{...t,frequency:r?e.frequency+1:e.frequency,lastAccessedOn:r?Date.now():e.lastAccessedOn}}(s[a],r):(s.length===c&&s.shift(),s.push({...r,frequency:1})),localStorage.setItem(e,JSON.stringify(s))}}},qe=Object(_.a)(Me,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gl-display-flex gl-flex-direction-column gl-flex-align-items-stretch gl-h-full"},[r("frequent-items-search-input",{class:e.searchClass,attrs:{namespace:e.namespace,"data-testid":"frequent-items-search-input"}}),e._v(" "),e.isLoadingItems?r("gl-loading-icon",{staticClass:"loading-animation prepend-top-20",attrs:{label:e.translations.loadingMessage,size:"lg","data-testid":"loading"}}):e._e(),e._v(" "),e.isLoadingItems||e.hasSearchQuery?e._e():r("div",{staticClass:"section-header",attrs:{"data-testid":"header"}},[e._v("\n    "+e._s(e.translations.header)+"\n  ")]),e._v(" "),e.isLoadingItems?e._e():r("frequent-items-list",{attrs:{items:e.items,namespace:e.namespace,"has-search-query":e.hasSearchQuery,"is-fetch-failed":e.isFetchFailed,matcher:e.searchQuery}})],1)}),[],!1,null,null,null).exports,Oe={provide(){return{vuexModule:this.$options.propsData.vuexModule}},props:{vuexModule:{type:String,required:!0}},render(){return this.$slots.default}},Te={components:{FrequentItemsApp:qe,TopNavMenuSections:D,VuexModuleProvider:Object(_.a)(Oe,void 0,void 0,!1,null,null,null).exports},inheritAttrs:!1,props:{frequentItemsVuexModule:{type:String,required:!0},frequentItemsDropdownType:{type:String,required:!0},currentItem:{type:Object,required:!0},containerClass:{type:String,required:!1,default:""},linksPrimary:{type:Array,required:!1,default:function(){return[]}},linksSecondary:{type:Array,required:!1,default:function(){return[]}}},computed:{menuSections(){return[{id:"primary",menuItems:this.linksPrimary},{id:"secondary",menuItems:this.linksSecondary}].filter((function(e){var t;return null===(t=e.menuItems)||void 0===t?void 0:t.length}))},currentItemTimestamped(){return{...this.currentItem,lastAccessedOn:Date.now()}}},mounted(){var e=this;this.$nextTick((function(){ee.$emit(`${e.frequentItemsDropdownType}-dropdownOpen`)}))}},Ce=Object(_.a)(Te,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top-nav-container-view gl-display-flex gl-flex-direction-column"},[t("div",{staticClass:"frequent-items-dropdown-container gl-w-auto",class:this.containerClass,attrs:{"data-testid":"frequent-items-container"}},[t("div",{staticClass:"frequent-items-dropdown-content gl-w-full! gl-pt-0!"},[t("vuex-module-provider",{attrs:{"vuex-module":this.frequentItemsVuexModule}},[t("frequent-items-app",this._b({attrs:{"current-item":this.currentItemTimestamped}},"frequent-items-app",this.$attrs,!1))],1)],1)]),this._v(" "),t("top-nav-menu-sections",{staticClass:"gl-mt-auto",attrs:{sections:this.menuSections,"with-top-border":""}})],1)}),[],!1,null,null,null).exports,xe={components:{KeepAliveSlots:E,ResponsiveHeader:R,ResponsiveHome:P,TopNavContainerView:Ce},props:{navData:{type:Object,required:!0}},data:()=>({activeView:"home",hasMobileOverlay:!1}),computed:{nav(){return function({primary:e,secondary:t,...r}){return{...r,primary:S(e),secondary:S(t)}}(this.navData)}},created(){this.$root.$on(g.b,this.showMobileOverlay),this.$root.$on(g.a,this.hideMobileOverlay)},beforeDestroy(){this.$root.$off(g.b,this.showMobileOverlay),this.$root.$off(g.a,this.hideMobileOverlay)},methods:{onMenuItemClick({view:e}){e&&(this.activeView=e)},showMobileOverlay(){this.hasMobileOverlay=!0},hideMobileOverlay(){this.hasMobileOverlay=!1}},FREQUENT_ITEMS_PROJECTS:h,FREQUENT_ITEMS_GROUPS:v},je=Object(_.a)(xe,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"mobile-overlay",class:{"mobile-nav-open":e.hasMobileOverlay},attrs:{"data-testid":"mobile-overlay"}}),e._v(" "),r("keep-alive-slots",{attrs:{"slot-key":e.activeView},scopedSlots:e._u([{key:"home",fn:function(){return[r("responsive-home",{attrs:{"nav-data":e.nav},on:{"menu-item-click":e.onMenuItemClick}})]},proxy:!0},{key:"projects",fn:function(){return[r("responsive-header",{on:{"menu-item-click":e.onMenuItemClick}},[e._v("\n        "+e._s(e.__("Projects"))+"\n      ")]),e._v(" "),r("top-nav-container-view",e._b({attrs:{"frequent-items-dropdown-type":e.$options.FREQUENT_ITEMS_PROJECTS.namespace,"frequent-items-vuex-module":e.$options.FREQUENT_ITEMS_PROJECTS.vuexModule,"container-class":"gl-px-3"}},"top-nav-container-view",e.nav.views.projects,!1))]},proxy:!0},{key:"groups",fn:function(){return[r("responsive-header",{on:{"menu-item-click":e.onMenuItemClick}},[e._v("\n        "+e._s(e.__("Groups"))+"\n      ")]),e._v(" "),r("top-nav-container-view",e._b({attrs:{"frequent-items-dropdown-type":e.$options.FREQUENT_ITEMS_GROUPS.namespace,"frequent-items-vuex-module":e.$options.FREQUENT_ITEMS_GROUPS.vuexModule,"container-class":"gl-px-3"}},"top-nav-container-view",e.nav.views.groups,!1))]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,Re=r("xe88"),Ne=r("408k"),ke=r("vDPP"),De=r("l9Jy"),Fe=r.n(De),$e={components:{KeepAliveSlots:E,TopNavContainerView:Ce,TopNavMenuSections:D},props:{primary:{type:Array,required:!1,default:function(){return[]}},secondary:{type:Array,required:!1,default:function(){return[]}},views:{type:Object,required:!1,default:function(){return{}}}},data(){return{menuSections:[{id:"primary",menuItems:Fe()(this.primary)},{id:"secondary",menuItems:Fe()(this.secondary)}].filter((function(e){var t;return null===(t=e.menuItems)||void 0===t?void 0:t.length}))}},computed:{allMenuItems(){return this.menuSections.flatMap((function(e){return e.menuItems}))},activeView(){const e=this.allMenuItems.find((function(e){return e.active}));return null==e?void 0:e.view},menuClass(){return this.activeView?"":"gl-w-full"}},methods:{onMenuItemClick({id:e}){var t=this;this.allMenuItems.forEach((function(r){t.$set(r,"active",e===r.id)}))}},FREQUENT_ITEMS_PROJECTS:h,FREQUENT_ITEMS_GROUPS:v},Ae=Object(_.a)($e,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gl-display-flex gl-align-items-stretch"},[r("div",{staticClass:"gl-w-grid-size-30 gl-flex-shrink-0 gl-bg-gray-10 gl-p-3",class:e.menuClass,attrs:{"data-testid":"menu-sidebar"}},[r("top-nav-menu-sections",{attrs:{sections:e.menuSections},on:{"menu-item-click":e.onMenuItemClick}})],1),e._v(" "),r("keep-alive-slots",{directives:[{name:"show",rawName:"v-show",value:e.activeView,expression:"activeView"}],staticClass:"gl-w-grid-size-40 gl-overflow-hidden gl-p-3",attrs:{"slot-key":e.activeView,"data-testid":"menu-subview","data-qa-selector":"menu_subview_container"},scopedSlots:e._u([{key:"projects",fn:function(){return[r("top-nav-container-view",e._b({attrs:{"frequent-items-dropdown-type":e.$options.FREQUENT_ITEMS_PROJECTS.namespace,"frequent-items-vuex-module":e.$options.FREQUENT_ITEMS_PROJECTS.vuexModule}},"top-nav-container-view",e.views.projects,!1))]},proxy:!0},{key:"groups",fn:function(){return[r("top-nav-container-view",e._b({attrs:{"frequent-items-dropdown-type":e.$options.FREQUENT_ITEMS_GROUPS.namespace,"frequent-items-vuex-module":e.$options.FREQUENT_ITEMS_GROUPS.vuexModule}},"top-nav-container-view",e.views.groups,!1))]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,Qe={components:{GlNav:Re.a,GlNavItemDropdown:Ne.a,GlDropdownForm:ke.a,TopNavDropdownMenu:Ae},props:{navData:{type:Object,required:!0}}},Le=Object(_.a)(Qe,(function(){var e=this.$createElement,t=this._self._c||e;return t("gl-nav",{staticClass:"navbar-sub-nav"},[t("gl-nav-item-dropdown",{attrs:{text:this.navData.activeTitle,"data-qa-selector":"navbar_dropdown","data-qa-title":this.navData.activeTitle,icon:"hamburger","menu-class":"gl-mt-3! gl-max-w-none! gl-max-h-none! gl-sm-w-auto! js-top-nav-dropdown-menu","toggle-class":"top-nav-toggle js-top-nav-dropdown-toggle gl-px-3!","no-flip":"","no-caret":""}},[t("gl-dropdown-form",[t("top-nav-dropdown-menu",{attrs:{primary:this.navData.primary,secondary:this.navData.secondary,views:this.navData.views}})],1)],1)],1)}),[],!1,null,null,null).exports,Ue=r("NmEs"),Ge=r("ZvgQ");const Pe=function({commit:e},t){e("SET_NAMESPACE",t)},Ve=function({commit:e},t){e("SET_STORAGE_KEY",t)},He=function({commit:e}){e("REQUEST_FREQUENT_ITEMS")},Be=function({commit:e},t){e("RECEIVE_FREQUENT_ITEMS_SUCCESS",t)},Je=function({commit:e}){e("RECEIVE_FREQUENT_ITEMS_ERROR")},ze=function({state:e,dispatch:t}){if(t("requestFrequentItems"),H.a.canUseLocalStorage()){const r=JSON.parse(localStorage.getItem(e.storageKey));t("receiveFrequentItemsSuccess",r?function(e){if(!e)return[];const t=ae()?u:l,r=e.filter((function(e){return e.frequency>=d}));return r&&0!==r.length?(r.sort((function(e,t){return e.frequency!==t.frequency?t.frequency-e.frequency:e.lastAccessedOn!==t.lastAccessedOn?t.lastAccessedOn-e.lastAccessedOn:0})),re()(r,t)):[]}(r):[])}else t("receiveFrequentItemsError")},Ke=function({commit:e}){e("REQUEST_SEARCHED_ITEMS")},Ye=function({commit:e},t){e("RECEIVE_SEARCHED_ITEMS_SUCCESS",t)},We=function({commit:e}){e("RECEIVE_SEARCHED_ITEMS_ERROR")},Ze=function({state:e,dispatch:t},r){t("requestSearchedItems");const n={simple:!0,per_page:20,membership:Object(Ue.y)()};let s;return"projects"===e.namespace?(s=Ge.e,n.order_by="last_activity_at"):s=Ge.d,s(r,n).then((function(e){t("receiveSearchedItemsSuccess",e)})).catch((function(){t("receiveSearchedItemsError")}))},Xe=function({commit:e,dispatch:t},r){e("SET_SEARCH_QUERY",r),r?t("fetchSearchedItems",r):t("fetchFrequentItems")},et=function(e){return""!==e.searchQuery};var tt={SET_NAMESPACE(e,t){Object.assign(e,{namespace:t})},SET_STORAGE_KEY(e,t){Object.assign(e,{storageKey:t})},SET_SEARCH_QUERY(e,t){const r=""!==t;Object.assign(e,{searchQuery:t,isLoadingItems:!0,hasSearchQuery:r})},REQUEST_FREQUENT_ITEMS(e){Object.assign(e,{isLoadingItems:!0,hasSearchQuery:!1})},RECEIVE_FREQUENT_ITEMS_SUCCESS(e,t){Object.assign(e,{items:t,isLoadingItems:!1,hasSearchQuery:!1,isFetchFailed:!1})},RECEIVE_FREQUENT_ITEMS_ERROR(e){Object.assign(e,{isLoadingItems:!1,hasSearchQuery:!1,isFetchFailed:!0})},REQUEST_SEARCHED_ITEMS(e){Object.assign(e,{isLoadingItems:!0,hasSearchQuery:!0})},RECEIVE_SEARCHED_ITEMS_SUCCESS(e,t){const r=t.data?t.data:t;Object.assign(e,{items:r.map((function(e){return{id:e.id,name:e.name,namespace:e.name_with_namespace||e.full_name,webUrl:e.web_url,avatarUrl:e.avatar_url}})),isLoadingItems:!1,hasSearchQuery:!0,isFetchFailed:!1})},RECEIVE_SEARCHED_ITEMS_ERROR(e){Object.assign(e,{isLoadingItems:!1,hasSearchQuery:!0,isFetchFailed:!0})}},rt=function({dropdownType:e=""}={}){return{namespace:"",dropdownType:e,storageKey:"",searchQuery:"",isLoadingItems:!1,isFetchFailed:!1,items:[]}};const nt=function(e={}){return{namespaced:!0,actions:n,getters:s,mutations:tt,state:rt(e)}},st=function(){return{modules:f.reduce((function(e,{namespace:t,vuexModule:r}){return Object.assign(e,{[r]:nt({dropdownType:t})})}),{})}};a.default.use(i.b);const at=function(e,t){const r=JSON.parse(e.dataset.viewModel),n=new i.b.Store(st());return new a.default({el:e,store:n,render:e=>e(t,{props:{navData:r}})})},it=function(e){return at(e,Le)},ot=function(e){return at(e,je)}}}]);
//# sourceMappingURL=top_nav.745ef696.chunk.js.map